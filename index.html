<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampoGuesser</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
    <section style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100">
        <h1>Campolido Geoguesser {x} {y}</h1>
        <div style="overflow:hidden;border:black 1px solid;">
            <canvas id="canvas" width="700" height="600"></canvas>
            <img style="display: none;" src="images/map.jpg" alt="map" id="map">
            <img style="width:25px;position:absolute;" src="images/pin.svg" id="pin">
        </div>
        <button id="resetPin">reset pin?</button>
    </section>
</body>
<style>
    body {
        margin: 0;
        padding: 0;
    }
</style>
<script>
    $(document).ready(function() {
        let pinBool = false;
        let x = 0;
        let y = 0;
        $(document).mousemove(function(event) {
            if (!pinBool) {
                x = event.pageX;
                y = event.pageY;

                $('#pin').css({
                    'left': (x-25/2)+'px',
                    'top': (y-25)+'px',
                });
            }
        });

        let canvasRef = $("#canvas");
        let mapPos = canvasRef.offset();

        $('#canvas').on('click', function() {
            pinBool = true;
            console.log(x+' '+y+' clicked');
            console.log(mapPos.left+' '+mapPos.top+' mapPos');
            console.log(Math.round(Math.sqrt((Math.pow(mapPos.left-x,2))+(Math.pow(mapPos.top-y,2))))+' away from orgin');
            drawLine(0, 0, x-mapPos.left, y-mapPos.top);
        });
        $('#resetPin').on('click', function() {
            pinBool = false;
        });


        const c = document.getElementById("canvas");
        const ctx = c.getContext('2d');
        // canvas.width = window.innerWidth * 0.60;
        // canvas.height = window.innerHeight * 0.75;
        const img = document.getElementById("map");
        // ctx.drawImage(img, 0, 0, window.innerWidth * 0.60, window.innerHeight * 0.75);
        ctx.drawImage(img, 0, 0, 700, 600);

        function drawLine(x1, y1, x2, y2) {
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.strokeStyle = 'red';
            ctx.stroke();
        }
        drawLine(0, 0, x, y);

        // var newElement = $('<div>');

        // // Set the element's style (including left and top)
        // newElement.css({
        // 'width': '5px',  // Adjust width as needed
        // 'height': '5px', // Adjust height as needed
        // 'background-color': 'red',
        // 'position': 'absolute',
        // 'left': mapPos.left+'px',  // Adjust left position as needed
        // 'top': mapPos.top+'px'   // Adjust top position as needed
        // });

        // // Append the new element to the body (or any other container)
        // $('body').append(newElement);
    });
</script>
</html>